# VTube ‚Äî –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ö–æ–ª—Å—Ç (MVP) ‚Äî ¬´–≤—Å—ë –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ¬ª

> –≠—Ç–æ **–¥–µ—Å–∫—Ç–æ–ø–Ω–æ–µ Windows‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–±–∏—Ä–∞–µ—Ç **–≥–∏–±—Ä–∏–¥–Ω—É—é VTuber‚Äë—Å—Ü–µ–Ω—É (2D+3D)**, —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–º **web‚Äë–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º**, —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è **DLL‚Äë–ø–ª–∞–≥–∏–Ω–∞–º–∏** –∏ –æ—Ç–¥–∞—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–∞–∫ **web‚Äë—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ –ø–æ formatId** (–¥–ª—è OBS —á–µ—Ä–µ–∑ Browser Source) + —Ñ–æ–ª–ª–±–µ–∫ –æ–∫–Ω–∞ –ø–æ–¥ Window Capture.
>
> –ö–ª—é—á–µ–≤–∞—è —Ñ–∏—à–∫–∞: **–≤—Å—ë —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –µ–¥–∏–Ω—ã–º —è–∑—ã–∫–æ–º `SceneCommand`**, –∞ Codex –º–æ–∂–µ—Ç –≥–æ–Ω—è—Ç—å **—Ä–µ–Ω–¥–µ—Ä‚Äë—Ä–µ–≥—Ä–µ—Å—Å–∏–∏** –Ω–∞ –ü–ö –≤–ª–∞–¥–µ–ª—å—Ü–∞ (snapshots ‚Üí golden diff). –ö–æ—Ä–æ—á–µ: –º–µ–Ω—å—à–µ —Ä—É—á–Ω–æ–≥–æ ¬´—Ç—ã–∫‚Äë—Ç—ã–∫¬ª, –±–æ–ª—å—à–µ ¬´–∞–≥–µ–Ω—Ç, –¥–µ–ª–∞–π –∫—Ä–∞—Å–∏–≤–æ¬ª üòà

---

## 0) TL;DR: —á—Ç–æ —ç—Ç–æ –∑–∞ –ø—Ä–æ–µ–∫—Ç
### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–µ–∫—Ç (`vtproj` –∫–∞–∫ –ø–∞–ø–∫–∞), –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—Ü–µ–Ω—É, –ø–µ—Ä—Å–æ–Ω–∞–∂–∞, –æ–≤–µ—Ä–ª–µ–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π web‚Äë—Å–µ—Ä–≤–∏—Å.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ OBS Browser Source —Å—Å—ã–ª–∫—É `/view/<formatId>/release?...`.
- –í–æ –≤—Ä–µ–º—è —Å—Ç—Ä–∏–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Ü–µ–Ω–æ–π —á–µ—Ä–µ–∑ web‚Äë–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä/—Ö–æ—Ç–∫–µ–∏/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏/–ø–ª–∞–≥–∏–Ω—ã.

### MVP‚Äë—Ü–µ–ª–∏
- –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä 3D+2D (URP), multi‚Äëcam + derived —Ñ–æ—Ä–º–∞—Ç—ã.
- Per‚Äëformat UI overlay (Unity UI) + debug/release.
- Integrations: Twitch chat + webhook + hotkeys.
- –ü–ª–∞–≥–∏–Ω—ã DLL + DI.
- Replay –±—É—Ñ–µ—Ä 120—Å + NVENC H.264 + MKV.
- –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å (Codex): snapshot/golden.

### MVP‚Äë–Ω–µ‚Äë—Ü–µ–ª–∏ (–º–æ–∂–Ω–æ –ø–æ–∑–∂–µ)
- –ü–æ–ª–Ω—ã–π HTML/CSS overlay —Ä–µ–Ω–¥–µ—Ä.
- WebRTC playback –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π output.
- –ü–æ–ª–Ω—ã–π –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–æ–¥/–æ–≤–µ—Ä–ª–µ–µ–≤ (–≤ MVP ‚Äî read‚Äëonly –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è).

---

## 1) –¢–µ—Ä–º–∏–Ω—ã (—á—Ç–æ–±—ã –Ω–µ –ø—É—Ç–∞—Ç—å—Å—è)
- **cameraId** ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ —Ä–µ–Ω–¥–µ—Ä–∞ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–∞–º–µ—Ä–∞ —Å—Ü–µ–Ω—ã).
- **formatId** ‚Äî —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∫–∞–¥—Ä: crop/scale + overlay + output‚Äë–ø—Ä–æ—Ñ–∏–ª–∏.
- **profile** ‚Äî –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–≤–æ–¥–∞ —Ñ–æ—Ä–º–∞—Ç–∞: `debug` / `release`.
- **overlayProfileId** ‚Äî –Ω–∞–±–æ—Ä UI‚Äë–≤–∏–¥–∂–µ—Ç–æ–≤ (layout + assets) –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞.
- **layerId** ‚Äî —Å–ª–æ–π —Å—Ü–µ–Ω—ã (—Ñ–æ–Ω/–ø–µ—Ä—Å–æ–Ω–∞–∂/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏/FX –∏ —Ç.–¥.).
- **RenderItem** ‚Äî –∞—Ç–æ–º –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ (2D/3D —ç–ª–µ–º–µ–Ω—Ç, –º–∞—Ç–µ—Ä–∏–∞–ª, –º–∞—Å–∫–∞, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã).
- **Template (templateId)** ‚Äî prefab‚Äë–ø–æ–¥–æ–±–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å (–≤–∏–∑—É–∞–ª+–ø–æ–≤–µ–¥–µ–Ω–∏–µ) –¥–ª—è runtime‚Äë—Å–ø–∞–≤–Ω–∞.
- **Runtime state** ‚Äî —Ç–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è (–æ–ø–µ—Ä–∞—Ç–∏–≤–∫–∞).
- **Project state** ‚Äî —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `vtproj` (–∏—Å—Ç–∏–Ω–∞, –∫–æ—Ç–æ—Ä—É—é —à–∞—Ä–∏–º/–≤–µ—Ä—Å–∏–æ–Ω–∏–º).

---

## 2) –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã
- MVP: **Windows**.
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–æ–ø—É—Å–∫–∞–µ—Ç macOS/Linux –ø–æ–∑–∂–µ (–Ω–µ –∑–∞–≤—è–∑—ã–≤–∞–µ–º—Å—è –Ω–∞ Win‚Äë—Å–ø–µ—Ü–∏—Ñ–∏–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤).

---

## 3) –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (`vtproj`)
### –ü—Ä–æ–µ–∫—Ç –∫–∞–∫ –ø–∞–ø–∫–∞
- `vtproj/` ‚Äî –ø–∞–ø–∫–∞ (git‚Äëfriendly).
- –≠–∫—Å–ø–æ—Ä—Ç: **Export as `.vtproj`** (–∞—Ä—Ö–∏–≤ –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞).

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –¥–µ—Ä–µ–≤–æ
```text
<project>/
  scene/
    scene.json
    cameras.json
    formats.json
    layers.json
    templates/            (–æ–ø—Ü., –µ—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–ª—è —Å—Ü–µ–Ω—ã ‚Äî –Ω–µ MVP)
  characters/
    <charId>/character.json
  ui/
    overlays/<overlayProfileId>/overlay.json
    overlays/<overlayProfileId>/assets/
  assets/
    templates/<templateId>/template.json
    templates/<templateId>/assets/
    materials/
    textures/
    fonts/
  integrations/
    sources/
    rules/
    mappings/             (–æ–ø—Ü.)
  pipelines/
    dataGraph.json
    controlGraph.json     (–æ–ø—Ü.)
  outputs/
    profiles.json
  plugins/
    (–æ–ø—Ü.) project‚Äëlocal DLL plugins
  docs/
    (–æ–ø—Ü.) –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏
```

### Secrets –∏ workspace
- `.env` ‚Äî —Å–µ–∫—Ä–µ—Ç—ã (–ù–ï –∫–æ–º–º–∏—Ç–∏–º).
- `workspace.json` ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ù–ï –≤ –ø—Ä–æ–µ–∫—Ç–µ).

---

## 4) –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
```mermaid
flowchart LR
  subgraph App[Desktop App (Windows)]
    R[Renderer (Unity URP)]
    DS[DataStore]
    CQ[Command Queue]
    PL[Plugin Host (DLL + DI)]
    TR[Tracking (MediaPipe)]
    RP[Replay Buffer]
  end

  subgraph Web[Local Web Service]
    ORCH[Web Orchestrator UI]
    API[HTTP API]
    VIEW[/view formatId/]
    MJPG[/stream MJPEG/]
    SNAP[/snapshot PNG/]
  end

  subgraph Ext[External]
    OBS[OBS Browser Source]
    TW[Twitch Chat]
    WH[Webhooks]
    HK[Hotkeys]
  end

  TW --> API
  WH --> API
  HK --> API

  ORCH --> API
  API --> CQ
  PL --> CQ
  TR --> DS
  CQ --> R
  R --> DS
  R --> MJPG
  R --> SNAP
  VIEW --> MJPG
  OBS --> VIEW
  RP --> R
```

---

## 5) –†–µ–Ω–¥–µ—Ä –∏ –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ (Unity URP)
### –î–≤–∏–∂–æ–∫
- **Unity + URP** ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä‚Äë–ø–∞–π–ø–ª–∞–π–Ω –≤ MVP.

### –†–µ–Ω–¥–µ—Ä‚Äë—Ü–µ–ø–æ—á–∫–∞ –ø–æ –∫–∞–º–µ—Ä–µ
1) **Update (1 —Ä–∞–∑ –∑–∞ –∫–∞–¥—Ä)**
- Data Graph: webcam ‚Üí tracker ‚Üí filters ‚Üí `ParameterSet`.
- `bindings.json`: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏–∏/—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—ã/–º–∞—Ç–µ—Ä–∏–∞–ª—ã.
- –ü—Ä–∏–º–µ–Ω—è–µ–º –æ—á–µ—Ä–µ–¥—å `SceneCommand`.

2) **Base 3D Render (URP)**
- –†–µ–Ω–¥–µ—Ä 3D –º–∏—Ä–∞ –≤ `RT_Base(cameraId)`.

3) **2D/Hybrid Layer Pass**
- –†–∏—Å—É–µ–º —Å–ª–æ–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞/2D RenderItems (multi‚Äëplane) –≤ `RT_Base`.
- Blend modes: `Normal/Add/Multiply/Screen`.
- Clipping: **1 –º–∞—Å–∫–∞** –Ω–∞ RenderItem.
- Outline: –≤–∫–ª—é—á—ë–Ω –≤ MVP.

4) **Silhouette Depth Write (–ø–æ —Å–ª–æ—è–º)**
- –î–ª—è —Å–ª–æ—ë–≤ —Å `silhouetteWrite=true` –ø–∏—à–µ–º depth –ø–æ –º–∞—Å–∫–µ (alpha‚Äëclip) –¥–ª—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è 2D‚Üî3D.
- –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: **Silhouette** (Strict/Off ‚Äî –ø–æ–∑–∂–µ).

5) **Post + UI Overlay (per format)**
- –ü–æ—Å—Ç–ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ **—Å–∫–æ–º–ø–æ–∂–µ–Ω–Ω–æ–º—É** –∫–∞–¥—Ä—É.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ `formatId`:
  - –µ—Å–ª–∏ `derived=true`: crop/scale –æ—Ç `RT_Base`;
  - –∑–∞—Ç–µ–º overlay UI –ø–æ `overlayProfileId`.

6) **Outputs**
- web streaming endpoints (debug/release)
- –æ–∫–Ω–∞ –≤—ã–≤–æ–¥–∞ (–¥–ª—è OBS Window Capture)
- replay encoder (–µ—Å–ª–∏ `bufferize=true`)

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ä—è–¥–∫–∞ –≤ URP
- –ü–æ—Ä—è–¥–æ–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º —á–µ—Ä–µ–∑ **ScriptableRendererFeature/Pass** (–∏–ª–∏ RenderGraph –Ω–∞ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö), —á—Ç–æ–±—ã –±—ã–ª–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–æ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ.

```mermaid
flowchart TD
  U[Update: Tracking‚ÜíFilters‚ÜíBindings‚ÜíCommands] --> B[3D Render ‚Üí RT_Base]
  B --> H[2D/Hybrid Layers + Blend + Mask]
  H --> S[Silhouette Depth Write]
  S --> P[Post Processing]
  P --> F[Per-format Crop/Scale]
  F --> O[Overlay UI per format]
  O --> OUT[Outputs: MJPEG / Snapshot / Window / Replay]
```

---

## 6) –ö–∞–º–µ—Ä—ã, —Ñ–æ—Ä–º–∞—Ç—ã, –ø—Ä–æ—Ñ–∏–ª–∏
### –ö–∞–º–µ—Ä—ã
- `cameraId` ‚Äî –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é/–ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–Ω–¥–µ—Ä–∞ –∏ –Ω–∞–±–æ—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤.
- –£ –∫–∞–º–µ—Ä—ã –µ—Å—Ç—å `bufferize: bool` (–¥–ª—è replay).

### –§–æ—Ä–º–∞—Ç—ã
- `formatId` –ø—Ä–∏–≤—è–∑–∞–Ω –∫ `cameraId`.
- `derived=true` –æ–∑–Ω–∞—á–∞–µ—Ç crop/scale –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ RT, –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ 3D‚Äë—Ä–µ–Ω–¥–µ—Ä–∞.
- –£ —Ñ–æ—Ä–º–∞—Ç–∞ –µ—Å—Ç—å `overlayProfileId`.

### –ü—Ä–æ—Ñ–∏–ª–∏ –≤—ã–≤–æ–¥–∞ (debug/release)
- debug/release ‚Äî —Ä–∞–∑–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–≤–æ–¥–∞ –∏ –Ω–∞–±–æ—Ä overlay‚Äë—Ç–µ–≥–æ–≤.

---

## 7) UI/Overlays (per-format)
### –ú–æ–¥–µ–ª—å
- –ö–∞–º–µ—Ä–∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Å—Ü–µ–Ω—É **–±–µ–∑ UI** ‚Üí –∫–∞–¥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ `formatId` ‚Üí overlay per `formatId`.
- –ü—Ä–æ—Ñ–∏–ª–∏: **debug** –∏ **release**.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è
- MVP: **Unity UI overlay** (Canvas/UIToolkit) ‚Üí `RT_Overlay(formatId)` ‚Üí –∫–æ–º–ø–æ–∑–∏—Ç –≤ output.
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IOverlayRenderer` + –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (HTML overlay –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–∑–∂–µ).

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- `formats.json` —Ö—Ä–∞–Ω–∏—Ç `overlayProfileId`.
- `SceneCommand`: `Format.SetOverlayProfile(formatId, overlayProfileId)`.

### Node editor (MVP)
- Node editor **read‚Äëonly –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** –∫–æ–Ω—Ñ–∏–≥–æ–≤/–≥—Ä–∞—Ñ–æ–≤.

---

## 8) –§–æ—Ä–º–∞—Ç `overlay.json` (–ø–æ–¥—Ä–æ–±–Ω–æ)
–§–∞–π–ª: `ui/overlays/<overlayProfileId>/overlay.json` + `assets/`.

### –ë–∞–∑–∞
- `overlayFormatVersion: "1.0"`
- `design: { width, height }` ‚Äî –¥–∏–∑–∞–π–Ω‚Äë—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ.
- `scaling.mode: fit|fill|stretch` (—Ä–µ–∫. `fit`).
- `scaling.snapToPixels: bool`.
- `safeArea.default: { left, top, right, bottom }` –≤ px –¥–∏–∑–∞–π–Ω‚Äë—Å–µ—Ç–∫–∏.
- `widgets[]` —Å `RectTransform`‚Äë–ø–æ–¥–æ–±–Ω—ã–º `transform`:
  - `anchorMin/anchorMax`, `pivot` (0..1)
  - `posPx/sizePx` –≤ –¥–∏–∑–∞–π–Ω‚Äë–ø–∏–∫—Å–µ–ª—è—Ö
- `tags[]` –¥–ª—è debug/release.

### Debug vs Release
- Debug‚Äë–≤–∏–¥–∂–µ—Ç—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è `tags:["debug"]`.
- Debug‚Äë–ø—Ä–æ—Ñ–∏–ª—å –≤–∫–ª—é—á–∞–µ—Ç debug‚Äë—Ç–µ–≥–∏, release ‚Äî –Ω–µ—Ç.

### Binding
- `bindings.textTemplate`, `bindings.valuePath`, `bindings.itemsPath`.
- DataStore –ø—É—Ç–∏: `scene.*`, `integrations.*`, `replay.*`, `vars.*`, `performance.*`, `system.*`.

### –®—Ä–∏—Ñ—Ç—ã
- –£ `Text` –≤–∏–¥–∂–µ—Ç–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `font` –ø–æ –∏–º–µ–Ω–∏ (string).
- –†–µ–∑–æ–ª–≤–∏–º —á–µ—Ä–µ–∑ `assets/fonts/*` —Ç–µ–∫—É—â–µ–≥–æ overlayProfile.
- –ï—Å–ª–∏ `font` –Ω–µ —É–∫–∞–∑–∞–Ω/–Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π.

### –í–∏–¥–∂–µ—Ç—ã MVP
- `Text` (—Å `font`)
- `Image`
- `ProgressBar`
- `FeedList`
- `DebugHUD`

---

## 9) –í—ã–≤–æ–¥ ¬´–ø—Ä–æ—Å—Ç–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è¬ª (MVP) ‚Äî Streaming Endpoints
### –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è
- –û—Ç–¥–∞—ë–º —Ñ–∏–Ω–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É **–ø–æ `formatId`**, –ø—Ä–æ—Ñ–∏–ª–∏ **debug/release**.
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ localhost; remote –≤–∫–ª—é—á–∞–µ—Ç—Å—è —è–≤–Ω–æ.

### Endpoint‚Äô—ã (MVP)
- `GET /view/<formatId>/<profile>` ‚Üí HTML viewer (–¥–ª—è OBS Browser Source –∏ —à–∞—Ä–∏–Ω–≥–∞).
- `GET /stream/<formatId>/<profile>.mjpg` ‚Üí MJPEG –ø–æ—Ç–æ–∫.
- `GET /snapshot/<formatId>/<profile>.png` ‚Üí snapshot (–ø—Ä–µ–≤—å—é/—Ç–µ—Å—Ç—ã).
- `GET /api/streams` ‚Üí —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∏–º–æ–≤ + URL.
- `GET /api/health`, `GET /api/metrics` ‚Üí –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞.

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- `release`: 30 fps, `jpegQuality‚âà80`.
- `debug`: 15 fps, `jpegQuality‚âà60`.
- Slow‚Äëclient policy: **–¥—Ä–æ–ø–∞–µ–º —Å—Ç–∞—Ä—ã–µ –∫–∞–¥—Ä—ã**, –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–∞–º—ã–π —Å–≤–µ–∂–∏–π.

### On‚Äëdemand
–§–æ—Ä–º–∞—Ç/–∫–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã, –µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å:
- —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ `/stream/*` –∏–ª–∏ `/view/*`
- –æ–∫–Ω–æ –≤—ã–≤–æ–¥–∞ (Window Capture)
- `camera.bufferize=true` (replay)
–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π –Ω–µ—Ç ‚Üí –¥–ª—è —ç—Ç–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ **–Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏–º –∏ –Ω–µ –∫–æ–¥–∏—Ä—É–µ–º**.

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è remote
- –¢–æ–∫–µ–Ω –≤ URL.
- –í—Å—ë –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∞—É–¥–∏—Ç–æ–º.

---

## 10) Output Profiles
### –•—Ä–∞–Ω–µ–Ω–∏–µ
- `outputs/outputs.json`.
- `formatId` —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å (—Ä–µ—é–∑ –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏/–∫–∞–º–µ—Ä–∞–º–∏).

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã (MVP)
- `fps`, `jpegQuality`, `maxViewers?`, `idleTimeoutSec`, `includeTags`.

### Snapshot
- Snapshot –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = **–ø–æ—Å–ª–µ–¥–Ω–∏–π –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã–π –∫–∞–¥—Ä**.

---

## 11) Web‚Äëorchestrator (UI + API)
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–Ω–∏–º–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π web‚Äë—Å–µ—Ä–≤–∏—Å.
- –†–æ–ª–∏: Owner / Moderator / Viewer.
- –ò–Ω–≤–∞–π—Ç‚Äë—Ç–æ–∫–µ–Ω—ã; –¥–ª—è Browser Source ‚Äî —Ç–æ–∫–µ–Ω –≤ URL.
- –ê—É–¥–∏—Ç‚Äë–ª–æ–≥: –∫—Ç–æ/—á—Ç–æ/–∫–æ–≥–¥–∞/—Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## 12) `SceneCommand` v0.1
–ï–¥–∏–Ω—ã–π —è–∑—ã–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ü–µ–Ω–æ–π –¥–ª—è UI/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π/–ø–ª–∞–≥–∏–Ω–æ–≤.

MVP –≥—Ä—É–ø–ø—ã:
- `Layer.*` (enable/order/visibility)
- `Camera.*`, `Format.*` (–≤–∫–ª/–ø—Ä–æ—Ñ–∏–ª–∏/overlay)
- `Character.*` (params/expressions)
- `Fx.*` (trigger/enable)
- `Object.*` (spawn/despawn/set/attach)
- `Replay.*`

–û—á–µ—Ä–µ–¥—å –∫–æ–º–∞–Ω–¥:
- `source`, `actorId`, `priority`, `timestamp`
- –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö

---

## 13) –ü–ª–∞–≥–∏–Ω—ã (DLL)
- –ü–ª–∞–≥–∏–Ω—ã = DLL, –æ–±—â–∏–π –Ω–∞–±–æ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.
- –ù–∞ —Å—Ç–∞—Ä—Ç–µ –≥—Ä—É–∑–∏–º —á–µ—Ä–µ–∑ reflection, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –≤ DI.
- `IPluginContext` –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º.
- –ü–ª–∞–≥–∏–Ω—ã –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å –ª–æ–≥–∏–∫—É —á–µ—Ä–µ–∑ –¥–µ–ª–µ–≥–∞—Ç—ã (–µ—Å–ª–∏ –∑–∞–ª–æ–∂–µ–Ω–æ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö).
- –ü–æ—Ä—è–¥–æ–∫ –ø–ª–∞–≥–∏–Ω–æ–≤ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º; –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –ª–æ–≥–∞–º–∏.
- –í—Å–µ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ try/catch: ¬´–ø–ª–∞–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è¬ª.

---

## 14) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ Rule Engine
### MVP –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- Twitch chat
- Generic Webhook
- Hotkeys

### –ü–æ—Ç–æ–∫
EventSource ‚Üí Normalizer (`EventEnvelope`) ‚Üí Rule Engine ‚Üí `SceneCommand[]` ‚Üí Audit.

`EventEnvelope`: `eventId/source/type/timestamp/actor/payload/tags`.

–°–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ: `.env`/–ª–æ–∫–∞–ª—å–Ω–æ–µ.

```mermaid
sequenceDiagram
  participant Src as Source (Twitch/Webhook/Hotkey)
  participant Norm as Normalizer
  participant Rules as Rule Engine
  participant Q as Command Queue
  participant R as Renderer
  participant A as Audit

  Src->>Norm: raw event
  Norm->>Rules: EventEnvelope
  Rules->>Q: SceneCommand[]
  Q->>R: apply commands
  Q->>A: log eventId‚ÜíruleId‚Üícmd
```

---

## 15) –¢—Ä–µ–∫–∏–Ω–≥
- MVP —Ç—Ä–µ–∫–µ—Ä: **MediaPipe**.
- –¢—Ä–µ–∫–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è/–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–æ–¥—ã Data Graph.
- –§–∏–ª—å—Ç—Ä—ã/—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ/–º–∞–ø–ø–∏–Ω–≥ ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ –Ω–æ–¥–∞–º–∏.

---

## 16) Runtime vs Project state (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/undo)
- Live –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø–æ—Ä—è–¥–æ–∫/–≤–∏–¥–∏–º–æ—Å—Ç—å/–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è) –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **runtime‚Äëonly**.
- `workspace.json` (–ª–æ–∫–∞–ª—å–Ω–æ) —Ö—Ä–∞–Ω–∏—Ç —Ä–∞–±–æ—á–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ **–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ.
- –ü—Ä–∏ **Save/Save As**: merge runtime overlay ‚Üí project state (—Ç–µ–∫—É—â–∞—è ¬´—Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å¬ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø—Ä–æ–µ–∫—Ç–æ–º).
- Undo/Redo ‚Äî –¥–ª—è –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö –ø—Ä–∞–≤–æ–∫; live —Ñ–∏–∫—Å–∏—Ä—É–µ–º –∞—É–¥–∏—Ç–æ–º.

---

## 17) Templates/Prefabs –∏ runtime‚Äë–æ–±—ä–µ–∫—Ç—ã
### –ì–¥–µ –ª–µ–∂–∞—Ç
- `assets/templates/<templateId>/template.json`

### –ß—Ç–æ —Ç–∞–∫–æ–µ template
- –í–∏–∑—É–∞–ª + –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
- Props ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–µ, –æ–ø–∏—Å–∞–Ω—ã –≤ JSON –≤–Ω—É—Ç—Ä–∏ template.
- –õ–∏–º–∏—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ—Ç.

–î–≤–∞ –ø—É—Ç–∏:
- MVP: `Object.Spawn(templateId, ...properties...)`
- –ü–æ–∑–∂–µ: spawn ¬´—Å –Ω—É–ª—è¬ª (inline spec)

---

## 18) DataStore
- `dataStoreVersion: "1.0"`.
- Top-level: `scene`, `integrations`, `replay`, `vars`, `performance`, `system`.
- `vars.*` –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –∫—Ç–æ —É–≥–æ–¥–Ω–æ (rules/plugins/UI).
- ¬´–ü–∏—à–µ–º –≤—Å—ë¬ª ‚Äî —á–µ—Ä–µ–∑ –∞—É–¥–∏—Ç/–ª–æ–≥–∏; DataStore –¥–ª—è UI –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ –æ–±—ä—ë–º—É.

---

## 19) Replay / ¬´–º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –ø–æ–≤—Ç–æ—Ä¬ª
- `camera.bufferize: bool`.
- `bufferize=true` ‚Üí –∫–∞–º–µ—Ä–∞ **–≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω–∞**.
- Ring buffer –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N —Å–µ–∫—É–Ω–¥ (–¥–µ—Ñ–æ–ª—Ç 120).
- –ë—É—Ñ–µ—Ä–∏–º 1 —Ñ–æ—Ä–º–∞—Ç –Ω–∞ –∫–∞–º–µ—Ä—É (–¥–µ—Ñ–æ–ª—Ç: release —Ñ–æ—Ä–º–∞—Ç).
- –¢—Ä–∏–≥–≥–µ—Ä—ã: UI + hotkey.
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ: Videos.
- –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ: **NVENC H.264 (AVC)**, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **MKV**.

---

## 20) –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Codex + —Ä–µ–Ω–¥–µ—Ä)
- –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã: engine‚Äëagnostic (.NET).
- –†–µ–Ω–¥–µ—Ä‚Äë—Ä–µ–≥—Ä–µ—Å—Å–∏–∏: PNG snapshots ‚Üí golden diff.
- Codex –≥–æ–Ω—è–µ—Ç —Ç–µ—Å—Ç—ã –Ω–∞ –ü–ö –≤–ª–∞–¥–µ–ª—å—Ü–∞ —á–µ—Ä–µ–∑ CLI (snapshot endpoint –∏–ª–∏ CLI‚Äë—Ä–µ–∂–∏–º).

---

## 21) Packaging / –¥–∏—Å—Ç—Ä–∏–±—É—Ü–∏—è
- –ü–ª–∞–≥–∏–Ω—ã: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ + –ø—Ä–æ–µ–∫—Ç–Ω—ã–µ (–æ–±–∞ –ø—É—Ç–∏).
- –°–µ–∫—Ä–µ—Ç—ã: `.env` (–Ω–µ –≤ `vtproj`).
- `workspace.json`: –ª–æ–∫–∞–ª—å–Ω–æ.
- `vtproj` –∫–∞–∫ –ø–∞–ø–∫–∞ + Export as `.vtproj`.
- –ú–∏–≥—Ä–∞—Ü–∏–∏ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: **–¥–∞**.

---

## 22) –û—Ç–∫—Ä—ã—Ç—ã–µ –ø—É–Ω–∫—Ç—ã (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç MVP)
- –ü—Ä–∏–º–µ—Ä—ã –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ `vtproj` (reference project).
- –ü—Ä–∏–º–µ—Ä—ã `template.json` –∏ `outputs/outputs.json` (–∫–∞–∫ ¬´–∂–∏–≤—ã–µ¬ª –æ–±—Ä–∞–∑—Ü—ã).
- –¢–∞–±–ª–∏—á–∫–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—É—Ç–µ–π DataStore.



---

## 23) –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥–æ–≤ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, –Ω–æ –ø–æ–ª–µ–∑–Ω—ã–µ)
### 23.1 `outputs/outputs.json`
```json
{
  "outputsVersion": "1.0",
  "profiles": {
    "Release30": { "fps": 30, "jpegQuality": 80, "idleTimeoutSec": 10, "includeTags": [] },
    "Debug15":   { "fps": 15, "jpegQuality": 60, "idleTimeoutSec": 5,  "includeTags": ["debug"] }
  }
}
```

### 23.2 `scene/formats.json` (–∫–∞–∫ —Ñ–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–æ—Ñ–∏–ª–∏)
```json
{
  "formatsVersion": "1.0",
  "formats": {
    "cam_main_16x9": {
      "cameraId": "cam_main",
      "derived": false,
      "resolution": { "w": 1920, "h": 1080 },
      "overlayProfileId": "overlay_16x9",
      "outputProfiles": { "release": "Release30", "debug": "Debug15" }
    },
    "cam_main_9x16": {
      "cameraId": "cam_main",
      "derived": true,
      "sourceFormatId": "cam_main_16x9",
      "crop": { "mode": "center", "w": 1080, "h": 1920 },
      "overlayProfileId": "overlay_9x16",
      "outputProfiles": { "release": "Release30", "debug": "Debug15" }
    }
  }
}
```

### 23.3 `assets/templates/<templateId>/template.json` (—Å–∫–µ–ª–µ—Ç)
```json
{
  "templateVersion": "1.0",
  "id": "twitch_chat_bubble",
  "render": {
    "renderItemsRef": "renderItems.json"
  },
  "components": [
    { "type": "lifetime", "defaultMs": 6000 },
    { "type": "followAnchor", "anchorId": "avatar.head", "mode": "smooth" },
    { "type": "tween", "property": "opacity", "from": 0, "to": 1, "ms": 150 }
  ],
  "propsSchema": {
    "text":      { "type": "string", "default": "" },
    "userName":  { "type": "string", "default": "" },
    "color":     { "type": "color",  "default": "#ffffff" },
    "lifetimeMs":{ "type": "int",    "default": 6000, "min": 0, "max": 600000 }
  }
}
```

---

## 24) –î–∏–∞–≥—Ä–∞–º–º–∞: Runtime vs Project (–∫–∞–∫ –Ω–µ –∑–∞—Å—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç)
```mermaid
flowchart LR
  P[Project State (vtproj)] -- Load --> R[Runtime State (session)]
  R -- Live tweaks --> R
  R -- Save/Save As (merge) --> P
  R -- workspace.json --> W[Local Workspace]
  W -- Restore --> R
```

---

## 25) –î–∏–∞–≥—Ä–∞–º–º–∞: Streaming + On-demand
```mermaid
flowchart TD
  OBS[OBS Browser Source] --> V[/view/formatId/profile]
  V --> S[/stream/formatId/profile.mjpg]
  S --> ENC[Encode once per format+profile]
  ENC --> FAN[Fan-out to clients]
  FAN --> OBS

  subgraph Demand[On-demand]
    C1[Viewer connected] --> ON[Format active]
    C2[Window open] --> ON
    C3[bufferize=true] --> ON
    ON --> RENDER[Render + Overlay + Encode]
    OFF[No consumers] --> SLEEP[No render/encode]
  end
```

---

## 26) –î–∏–∞–≥—Ä–∞–º–º–∞: –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞–≥–∏–Ω–∞
```mermaid
sequenceDiagram
  participant Host as PluginHost
  participant DI as DI Container
  participant P as Plugin

  Host->>P: Load (reflection)
  Host->>DI: Register services
  Host->>P: Initialize(IPluginContext)
  P-->>Host: initialized=true/false
  loop Runtime
    Host->>P: OnEvent/OnTick (safe try/catch)
  end
  Host->>P: Dispose
```

---

## 27) –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ (MVP –ø—Ä–∞–≤–∏–ª–æ)
- –ö–∞–∂–¥—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–º–µ–µ—Ç `*Version: "1.0"` (scene/formats/overlay/templates/profiles).
- –ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `minAppVersion` (–∏–ª–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç) –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä—ã–º –±–∏–ª–¥–æ–º.
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ: –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–π ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –ø–∏—à–µ–º –≤ –ª–æ–≥, —á—Ç–æ –æ–±–Ω–æ–≤–∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

---

## 28) –ú–µ–ª–∫–∏–µ, –Ω–æ –≤–∞–∂–Ω—ã–µ ¬´–≥–∞–π–∫–∏¬ª
- –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–±—ã—Ç–∏—è/–∫–æ–º–∞–Ω–¥—ã/–ø–ª–∞–≥–∏–Ω—ã –∑–∞–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ **try/catch**, –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∂–∏—Ç—å.
- –î–ª—è Browser Source –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ **token –≤ URL** (–±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤).
- –í—Å–µ `GET /stream/*` –¥–æ–ª–∂–Ω—ã –æ—Ç–¥–∞–≤–∞—Ç—å `Cache-Control: no-store`.
- –î–ª—è slow‚Äëclients: **–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º —Ä–µ–Ω–¥–µ—Ä**, –¥—Ä–æ–ø–∞–µ–º –∫–∞–¥—Ä—ã.
- –õ—é–±–∞—è ¬´–º–∞–≥–∏—è¬ª (—Ä–∞–Ω–¥–æ–º/–≤—Ä–µ–º—è) –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω–∞ —É–º–µ—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è (seed/—Ñ–∏–∫—Å‚Äë—Ç–∞–π–º—Å—Ç–µ–ø) –≤ —Ä–µ–∂–∏–º–µ regression.
