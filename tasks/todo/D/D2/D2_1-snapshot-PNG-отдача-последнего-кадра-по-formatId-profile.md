# D2_1 — /snapshot PNG: отдача последнего кадра по formatId/profile

**Status:** todo


## Цель

Реализовать PNG snapshot endpoint для регрессий/ручной проверки.


## Объём

**Включено:**

- Frame cache per format
- PNG encode
- 503 если нет кадра


**Не включено:**

- История снапшотов




## Шаги реализации

1. Хранить last frame для каждого derived формата.
2. Кодировать PNG на запрос.
3. Если кадра нет — 503 + текст.


## Критерии приёмки

- [ ] Возвращается валидный PNG.
- [ ] 503 корректно работает.


## Как проверить

- Скачать PNG и сравнить с viewer визуально.
- Изменить overlay → новый snapshot отличается.


## Артефакты

- /snapshot endpoint
- Frame cache
